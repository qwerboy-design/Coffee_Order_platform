# å¾Œå°ç®¡ç†ç³»çµ±è¨­è¨ˆè¦åŠƒ

> **ç‰ˆæœ¬**: v1.0.0  
> **æœ€å¾Œæ›´æ–°**: 2026-01-05  
> **ç‹€æ…‹**: è¦åŠƒä¸­

æœ¬æ–‡ä»¶è©³ç´°èªªæ˜å’–å•¡è±†è¨‚å–®ç³»çµ±å¾Œå°ç®¡ç†åŠŸèƒ½çš„å®Œæ•´è¨­è¨ˆï¼ŒåŒ…å«å¸³è™Ÿæ¬Šé™ç®¡ç†ã€å•†å“ç®¡ç†ã€åŠ CRM åˆ†æå ±è¡¨åŠŸèƒ½ã€‚

---

## ğŸ“‘ ç›®éŒ„

1. [ç³»çµ±æ¶æ§‹ç¸½è¦½](#ä¸€ç³»çµ±æ¶æ§‹ç¸½è¦½)
2. [å¸³è™Ÿæ¬Šé™ç®¡ç†ç³»çµ±](#äºŒå¸³è™Ÿæ¬Šé™ç®¡ç†ç³»çµ±)
3. [å•†å“ç®¡ç†åŠŸèƒ½](#ä¸‰å•†å“ç®¡ç†åŠŸèƒ½)
4. [CRM åˆ†æå ±è¡¨åŠŸèƒ½](#å››crm-åˆ†æå ±è¡¨åŠŸèƒ½)
5. [è³‡æ–™åº«è¨­è¨ˆ](#äº”è³‡æ–™åº«è¨­è¨ˆ)
6. [API è¨­è¨ˆ](#å…­api-è¨­è¨ˆ)
7. [å¯¦ä½œå„ªå…ˆé †åº](#ä¸ƒå¯¦ä½œå„ªå…ˆé †åº)

---

## ä¸€ã€ç³»çµ±æ¶æ§‹ç¸½è¦½

### 1.1 æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å¾Œå°ç®¡ç†ç³»çµ±æ¶æ§‹                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  è¶…ç´šç®¡ç†å“¡   â”‚    â”‚   åº—é•·/ä¸»ç®¡   â”‚    â”‚   ä¸€èˆ¬å“¡å·¥   â”‚               â”‚
â”‚  â”‚ (Super Admin)â”‚    â”‚   (Manager)   â”‚    â”‚   (Staff)   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚                   â”‚                   â”‚                        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                             â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    æ¬Šé™é©—è­‰ Middleware                              â”‚  â”‚
â”‚  â”‚  - JWT Session é©—è­‰                                                 â”‚  â”‚
â”‚  â”‚  - è§’è‰²æ¬Šé™æª¢æŸ¥ (RBAC)                                              â”‚  â”‚
â”‚  â”‚  - æ“ä½œæ—¥èªŒè¨˜éŒ„                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚                                            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚         â–¼                   â–¼                   â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   å¸³è™Ÿç®¡ç†   â”‚    â”‚   å•†å“ç®¡ç†    â”‚    â”‚   å ±è¡¨åˆ†æ   â”‚               â”‚
â”‚  â”‚   æ¨¡çµ„       â”‚    â”‚   æ¨¡çµ„       â”‚    â”‚   æ¨¡çµ„       â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                             â”‚                                            â”‚
â”‚                             â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Supabase (PostgreSQL)                          â”‚  â”‚
â”‚  â”‚  - admin_users (å¾Œå°å¸³è™Ÿ)                                          â”‚  â”‚
â”‚  â”‚  - roles (è§’è‰²)                                                    â”‚  â”‚
â”‚  â”‚  - permissions (æ¬Šé™)                                              â”‚  â”‚
â”‚  â”‚  - role_permissions (è§’è‰²-æ¬Šé™é—œè¯)                                 â”‚  â”‚
â”‚  â”‚  - admin_activity_logs (æ“ä½œæ—¥èªŒ)                                  â”‚  â”‚
â”‚  â”‚  - product_categories (å•†å“åˆ†é¡)                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€è¡“é¸å‹

| é …ç›® | æŠ€è¡“ | èªªæ˜ |
|------|------|------|
| èªè­‰æ–¹å¼ | JWT + RBAC | åŸºæ–¼è§’è‰²çš„å­˜å–æ§åˆ¶ |
| åœ–ç‰‡å„²å­˜ | Supabase Storage | å…è²» 1GBï¼Œæ”¯æ´ CDN |
| å ±è¡¨åœ–è¡¨ | Recharts / Chart.js | React å‹å–„çš„åœ–è¡¨åº« |
| è³‡æ–™åŒ¯å‡º | xlsx / jspdf | Excel å’Œ PDF åŒ¯å‡º |

---

## äºŒã€å¸³è™Ÿæ¬Šé™ç®¡ç†ç³»çµ±

### 2.1 è§’è‰²å®šç¾© (RBAC - Role-Based Access Control)

```mermaid
graph TD
    A[Super Admin è¶…ç´šç®¡ç†å“¡] --> B[æ‰€æœ‰æ¬Šé™]
    C[Manager åº—é•·/ä¸»ç®¡] --> D[è¨‚å–®ç®¡ç†]
    C --> E[å•†å“ç®¡ç†]
    C --> F[å ±è¡¨æŸ¥çœ‹]
    C --> G[å“¡å·¥ç®¡ç†-æœ‰é™]
    H[Staff ä¸€èˆ¬å“¡å·¥] --> I[è¨‚å–®è™•ç†]
    H --> J[å•†å“æŸ¥çœ‹]
    H --> K[åŸºæœ¬å ±è¡¨]
```

### 2.2 è§’è‰²æ¬Šé™çŸ©é™£

| æ¬Šé™æ¨¡çµ„ | æ¬Šé™ä»£ç¢¼ | Super Admin | Manager | Staff |
|---------|----------|:-----------:|:-------:|:-----:|
| **å¸³è™Ÿç®¡ç†** | | | | |
| æŸ¥çœ‹æ‰€æœ‰å¸³è™Ÿ | `admin:read` | âœ… | âœ… | âŒ |
| å»ºç«‹å¸³è™Ÿ | `admin:create` | âœ… | âŒ | âŒ |
| ç·¨è¼¯å¸³è™Ÿ | `admin:update` | âœ… | éƒ¨åˆ† | âŒ |
| åˆªé™¤/åœç”¨å¸³è™Ÿ | `admin:delete` | âœ… | âŒ | âŒ |
| æŒ‡æ´¾è§’è‰² | `admin:assign_role` | âœ… | âŒ | âŒ |
| **è¨‚å–®ç®¡ç†** | | | | |
| æŸ¥çœ‹è¨‚å–®åˆ—è¡¨ | `orders:read` | âœ… | âœ… | âœ… |
| æŸ¥çœ‹è¨‚å–®è©³æƒ… | `orders:read_detail` | âœ… | âœ… | âœ… |
| æ›´æ–°è¨‚å–®ç‹€æ…‹ | `orders:update_status` | âœ… | âœ… | âœ… |
| å–æ¶ˆè¨‚å–® | `orders:cancel` | âœ… | âœ… | âŒ |
| åˆªé™¤è¨‚å–® | `orders:delete` | âœ… | âŒ | âŒ |
| åŒ¯å‡ºè¨‚å–® | `orders:export` | âœ… | âœ… | âŒ |
| **å•†å“ç®¡ç†** | | | | |
| æŸ¥çœ‹å•†å“ | `products:read` | âœ… | âœ… | âœ… |
| æ–°å¢å•†å“ | `products:create` | âœ… | âœ… | âŒ |
| ç·¨è¼¯å•†å“ | `products:update` | âœ… | âœ… | âŒ |
| ä¸Šä¸‹æ¶å•†å“ | `products:toggle` | âœ… | âœ… | âŒ |
| åˆªé™¤å•†å“ | `products:delete` | âœ… | âŒ | âŒ |
| ç®¡ç†åˆ†é¡ | `categories:manage` | âœ… | âœ… | âŒ |
| **å®¢æˆ¶ç®¡ç†** | | | | |
| æŸ¥çœ‹å®¢æˆ¶åˆ—è¡¨ | `customers:read` | âœ… | âœ… | âœ… |
| æŸ¥çœ‹å®¢æˆ¶è©³æƒ… | `customers:read_detail` | âœ… | âœ… | âŒ |
| ç·¨è¼¯å®¢æˆ¶è³‡æ–™ | `customers:update` | âœ… | âœ… | âŒ |
| åˆªé™¤å®¢æˆ¶ | `customers:delete` | âœ… | âŒ | âŒ |
| åŒ¯å‡ºå®¢æˆ¶ | `customers:export` | âœ… | âœ… | âŒ |
| **å ±è¡¨åˆ†æ** | | | | |
| éŠ·å”®ç¸½è¦½å ±è¡¨ | `reports:sales_overview` | âœ… | âœ… | âœ… |
| è©³ç´°éŠ·å”®å ±è¡¨ | `reports:sales_detail` | âœ… | âœ… | âŒ |
| å®¢æˆ¶åˆ†æå ±è¡¨ | `reports:customer_analysis` | âœ… | âœ… | âŒ |
| å•†å“åˆ†æå ±è¡¨ | `reports:product_analysis` | âœ… | âœ… | âŒ |
| ç‡Ÿé‹å ±è¡¨ | `reports:operations` | âœ… | âœ… | âŒ |
| è²¡å‹™å ±è¡¨ | `reports:financial` | âœ… | âŒ | âŒ |
| åŒ¯å‡ºå ±è¡¨ | `reports:export` | âœ… | âœ… | âŒ |
| **ç³»çµ±è¨­å®š** | | | | |
| åŸºæœ¬è¨­å®š | `settings:basic` | âœ… | âœ… | âŒ |
| é€²éšè¨­å®š | `settings:advanced` | âœ… | âŒ | âŒ |
| æŸ¥çœ‹æ“ä½œæ—¥èªŒ | `logs:read` | âœ… | éƒ¨åˆ† | âŒ |

### 2.3 å¸³è™Ÿç®¡ç†åŠŸèƒ½åˆ—è¡¨

| åŠŸèƒ½ | èªªæ˜ | æ¬Šé™éœ€æ±‚ |
|------|------|---------|
| å¸³è™Ÿåˆ—è¡¨ | é¡¯ç¤ºæ‰€æœ‰å¾Œå°å¸³è™Ÿï¼Œæ”¯æ´æœå°‹/ç¯©é¸ | `admin:read` |
| å»ºç«‹å¸³è™Ÿ | è¼¸å…¥ Emailã€å§“åã€æŒ‡æ´¾è§’è‰² | `admin:create` |
| ç·¨è¼¯å¸³è™Ÿ | ä¿®æ”¹å¸³è™Ÿè³‡è¨Šã€è§’è‰² | `admin:update` |
| åœç”¨/å•Ÿç”¨å¸³è™Ÿ | æš«åœæˆ–æ¢å¾©å¸³è™Ÿå­˜å– | `admin:delete` |
| é‡è¨­å¯†ç¢¼ | ç™¼é€å¯†ç¢¼é‡è¨­éƒµä»¶ | `admin:update` |
| æŸ¥çœ‹æ“ä½œæ—¥èªŒ | æŸ¥çœ‹è©²å¸³è™Ÿçš„æ“ä½œè¨˜éŒ„ | `logs:read` |

### 2.4 å¾Œå°ç™»å…¥æµç¨‹

```mermaid
sequenceDiagram
    participant U as å¾Œå°ç”¨æˆ¶
    participant F as å‰ç«¯
    participant A as Auth API
    participant DB as Supabase
    
    U->>F: è¼¸å…¥ Email + å¯†ç¢¼
    F->>A: POST /api/admin/auth/login
    A->>DB: æŸ¥è©¢ admin_users
    DB-->>A: å›å‚³ç”¨æˆ¶è³‡æ–™ + è§’è‰²
    A->>A: é©—è­‰å¯†ç¢¼ (bcrypt)
    A->>A: æª¢æŸ¥å¸³è™Ÿç‹€æ…‹
    A->>DB: è¨˜éŒ„ç™»å…¥æ—¥èªŒ
    A->>A: ç”¢ç”Ÿ JWT (å« role)
    A-->>F: å›å‚³ JWT + ç”¨æˆ¶è³‡æ–™
    F->>F: å„²å­˜ Session Cookie
    F-->>U: è·³è½‰åˆ°å¾Œå°é¦–é 
```

---

## ä¸‰ã€å•†å“ç®¡ç†åŠŸèƒ½

### 3.1 åŠŸèƒ½ç¸½è¦½

```
å•†å“ç®¡ç†
â”œâ”€â”€ å•†å“åˆ—è¡¨
â”‚   â”œâ”€â”€ æœå°‹ï¼ˆåç¨±ã€SKUï¼‰
â”‚   â”œâ”€â”€ ç¯©é¸ï¼ˆåˆ†é¡ã€ç‹€æ…‹ã€åº«å­˜ï¼‰
â”‚   â”œâ”€â”€ æ’åºï¼ˆåç¨±ã€åƒ¹æ ¼ã€å»ºç«‹æ™‚é–“ï¼‰
â”‚   â””â”€â”€ æ‰¹æ¬¡æ“ä½œï¼ˆä¸Šæ¶/ä¸‹æ¶ã€åˆªé™¤ï¼‰
â”œâ”€â”€ æ–°å¢å•†å“
â”‚   â”œâ”€â”€ åŸºæœ¬è³‡è¨Š
â”‚   â”œâ”€â”€ åœ–ç‰‡ä¸Šå‚³ï¼ˆå¤šå¼µï¼‰
â”‚   â”œâ”€â”€ å®šåƒ¹è¨­å®š
â”‚   â”œâ”€â”€ åº«å­˜ç®¡ç†
â”‚   â””â”€â”€ SEO è¨­å®šï¼ˆå¯é¸ï¼‰
â”œâ”€â”€ ç·¨è¼¯å•†å“
â”‚   â””â”€â”€ (åŒæ–°å¢å•†å“)
â”œâ”€â”€ å•†å“åˆ†é¡ç®¡ç†
â”‚   â”œâ”€â”€ åˆ†é¡åˆ—è¡¨
â”‚   â”œâ”€â”€ æ–°å¢/ç·¨è¼¯åˆ†é¡
â”‚   â””â”€â”€ åˆ†é¡æ’åº
â””â”€â”€ åº«å­˜ç®¡ç†
    â”œâ”€â”€ åº«å­˜ç¸½è¦½
    â”œâ”€â”€ åº«å­˜èª¿æ•´è¨˜éŒ„
    â””â”€â”€ ä½åº«å­˜é è­¦è¨­å®š
```

### 3.2 å•†å“è³‡æ–™æ¬„ä½

| æ¬„ä½ | é¡å‹ | å¿…å¡« | èªªæ˜ |
|------|------|:----:|------|
| `name` | VARCHAR(255) | âœ… | å•†å“åç¨± |
| `sku` | VARCHAR(50) | âœ… | å•†å“ç·¨è™Ÿ (Stock Keeping Unit) |
| `description` | TEXT | âŒ | å•†å“æè¿°ï¼ˆæ”¯æ´ Markdownï¼‰ |
| `short_description` | VARCHAR(500) | âŒ | ç°¡çŸ­æè¿°ï¼ˆç”¨æ–¼åˆ—è¡¨é¡¯ç¤ºï¼‰ |
| `category_id` | UUID | âŒ | å•†å“åˆ†é¡ |
| `price` | DECIMAL(10,2) | âœ… | å”®åƒ¹ |
| `cost_price` | DECIMAL(10,2) | âŒ | æˆæœ¬åƒ¹ï¼ˆç”¨æ–¼åˆ©æ½¤è¨ˆç®—ï¼‰ |
| `compare_price` | DECIMAL(10,2) | âŒ | åŸåƒ¹ï¼ˆé¡¯ç¤ºæŠ˜æ‰£ç”¨ï¼‰ |
| `stock` | INTEGER | âœ… | åº«å­˜æ•¸é‡ |
| `low_stock_threshold` | INTEGER | âŒ | ä½åº«å­˜è­¦æˆ’å€¼ï¼ˆé è¨­ 10ï¼‰ |
| `weight` | DECIMAL(8,2) | âŒ | é‡é‡ (å…‹) |
| `origin` | VARCHAR(100) | âŒ | ç”¢åœ° |
| `roast_level` | ENUM | âŒ | çƒ˜ç„™ç¨‹åº¦ (æ·º/ä¸­/æ·±ç„™) |
| `flavor_notes` | TEXT[] | âŒ | é¢¨å‘³æè¿° (é™£åˆ—) |
| `grind_options` | ENUM[] | âœ… | å¯é¸ç ”ç£¨æ–¹å¼ |
| `images` | JSONB | âŒ | åœ–ç‰‡é™£åˆ— [{url, alt, order}] |
| `is_active` | BOOLEAN | âœ… | æ˜¯å¦ä¸Šæ¶ |
| `is_featured` | BOOLEAN | âœ… | æ˜¯å¦ç‚ºç²¾é¸å•†å“ |
| `sort_order` | INTEGER | âŒ | æ’åºé †åº |
| `meta_title` | VARCHAR(60) | âŒ | SEO æ¨™é¡Œ |
| `meta_description` | VARCHAR(160) | âŒ | SEO æè¿° |
| `created_by` | UUID | âœ… | å»ºç«‹è€… (admin_user_id) |
| `updated_by` | UUID | âŒ | æœ€å¾Œç·¨è¼¯è€… |

### 3.3 åœ–ç‰‡ä¸Šå‚³åŠŸèƒ½

#### ä¸Šå‚³æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ¶
    participant F as å‰ç«¯
    participant A as API
    participant S as Supabase Storage
    
    U->>F: é¸æ“‡åœ–ç‰‡æª”æ¡ˆ
    F->>F: å‰ç«¯å£“ç¸®/è£åˆ‡ (max 2MB)
    F->>A: POST /api/admin/upload
    A->>A: é©—è­‰æª”æ¡ˆé¡å‹/å¤§å°
    A->>S: ä¸Šå‚³è‡³ Storage
    S-->>A: å›å‚³ public URL
    A->>A: ç”¢ç”Ÿç¸®åœ– URL
    A-->>F: å›å‚³åœ–ç‰‡è³‡è¨Š
    F->>F: æ›´æ–°é è¦½
    F-->>U: é¡¯ç¤ºä¸Šå‚³æˆåŠŸ
```

#### åœ–ç‰‡è¦æ ¼

| ç”¨é€” | å°ºå¯¸ | æ ¼å¼ | èªªæ˜ |
|------|------|------|------|
| åŸåœ– | æœ€å¤§ 2000x2000 | JPEG/PNG/WebP | åŸå§‹ä¸Šå‚³åœ–ç‰‡ |
| å•†å“åˆ—è¡¨ | 400x400 | WebP | å•†å“å¡ç‰‡ç¸®åœ– |
| å•†å“è©³æƒ… | 800x800 | WebP | å•†å“è©³æƒ…é å¤§åœ– |
| ç¸®åœ– | 100x100 | WebP | ç®¡ç†å¾Œå°é è¦½ |

### 3.4 å•†å“åˆ†é¡è¨­è¨ˆ

```
å’–å•¡è±†åˆ†é¡
â”œâ”€â”€ å–®å“å’–å•¡
â”‚   â”œâ”€â”€ éæ´²ç”¢å€
â”‚   â”‚   â”œâ”€â”€ è¡£ç´¢æ¯”äº
â”‚   â”‚   â””â”€â”€ è‚¯äº
â”‚   â”œâ”€â”€ ä¸­å—ç¾ç”¢å€
â”‚   â”‚   â”œâ”€â”€ å·´è¥¿
â”‚   â”‚   â”œâ”€â”€ å“¥å€«æ¯”äº
â”‚   â”‚   â””â”€â”€ ç“œåœ°é¦¬æ‹‰
â”‚   â””â”€â”€ äºæ´²ç”¢å€
â”‚       â”œâ”€â”€ å°å°¼
â”‚       â””â”€â”€ è¶Šå—
â”œâ”€â”€ é…æ–¹è±†
â”‚   â”œâ”€â”€ ç¾©å¼é…æ–¹
â”‚   â””â”€â”€ æ‰‹æ²–é…æ–¹
â”œâ”€â”€ ç‰¹é¸ç³»åˆ—
â”‚   â”œâ”€â”€ èŠåœ’ç²¾é¸
â”‚   â””â”€â”€ ç«¶æ¨™æ‰¹æ¬¡
â””â”€â”€ å­£ç¯€é™å®š
```

### 3.5 åº«å­˜ç®¡ç†åŠŸèƒ½

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| åº«å­˜ç¸½è¦½ | é¡¯ç¤ºæ‰€æœ‰å•†å“åº«å­˜ç‹€æ…‹ |
| åº«å­˜èª¿æ•´ | æ‰‹å‹•å¢æ¸›åº«å­˜ï¼ˆéœ€å¡«å¯«åŸå› ï¼‰ |
| èª¿æ•´è¨˜éŒ„ | è¨˜éŒ„æ‰€æœ‰åº«å­˜è®Šå‹•æ­·å² |
| ä½åº«å­˜é è­¦ | ç•¶åº«å­˜ä½æ–¼é–¾å€¼æ™‚ç™¼é€é€šçŸ¥ |
| æ‰¹æ¬¡åŒ¯å…¥ | é€é CSV/Excel æ‰¹æ¬¡æ›´æ–°åº«å­˜ |

---

## å››ã€CRM åˆ†æå ±è¡¨åŠŸèƒ½

### 4.1 å ±è¡¨ç¸½è¦½

```
åˆ†æå ±è¡¨
â”œâ”€â”€ ğŸ“Š å„€è¡¨æ¿ (Dashboard)
â”‚   â”œâ”€â”€ ä»Šæ—¥éŠ·å”®æ‘˜è¦
â”‚   â”œâ”€â”€ æœ¬é€±/æœ¬æœˆç‡Ÿæ”¶è¶¨å‹¢
â”‚   â”œâ”€â”€ ç†±éŠ·å•†å“ Top 5
â”‚   â””â”€â”€ å³æ™‚è¨‚å–®å‹•æ…‹
â”œâ”€â”€ ğŸ’° éŠ·å”®å ±è¡¨
â”‚   â”œâ”€â”€ éŠ·å”®ç¸½è¦½
â”‚   â”œâ”€â”€ éŠ·å”®è¶¨å‹¢åˆ†æ
â”‚   â”œâ”€â”€ è¨‚å–®åˆ†æ
â”‚   â””â”€â”€ ä»˜æ¬¾æ–¹å¼åˆ†æ
â”œâ”€â”€ ğŸ‘¥ å®¢æˆ¶å ±è¡¨
â”‚   â”œâ”€â”€ å®¢æˆ¶ç¸½è¦½
â”‚   â”œâ”€â”€ å®¢æˆ¶åˆ†ç¾¤ (RFM)
â”‚   â”œâ”€â”€ å®¢æˆ¶ç”Ÿå‘½é€±æœŸ
â”‚   â””â”€â”€ å®¢æˆ¶å–å¾—åˆ†æ
â”œâ”€â”€ ğŸ“¦ å•†å“å ±è¡¨
â”‚   â”œâ”€â”€ å•†å“éŠ·å”®æ’è¡Œ
â”‚   â”œâ”€â”€ åˆ†é¡éŠ·å”®åˆ†æ
â”‚   â”œâ”€â”€ åº«å­˜åˆ†æ
â”‚   â””â”€â”€ å•†å“æ¯›åˆ©åˆ†æ
â”œâ”€â”€ ğŸ”„ ç‡Ÿé‹å ±è¡¨
â”‚   â”œâ”€â”€ è¨‚å–®è™•ç†æ•ˆç‡
â”‚   â”œâ”€â”€ å–è²¨æ–¹å¼åˆ†æ
â”‚   â””â”€â”€ æ™‚æ®µåˆ†æ
â””â”€â”€ ğŸ“ˆ è¶¨å‹¢å ±è¡¨
    â”œâ”€â”€ åŒæœŸæ¯”è¼ƒ
    â”œâ”€â”€ é æ¸¬åˆ†æ
    â””â”€â”€ å­£ç¯€æ€§åˆ†æ
```

### 4.2 å„€è¡¨æ¿ (Dashboard)

å³æ™‚é¡¯ç¤ºé—œéµç‡Ÿé‹æŒ‡æ¨™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ“Š ç‡Ÿé‹å„€è¡¨æ¿                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ä»Šæ—¥ç‡Ÿæ”¶    â”‚ â”‚  ä»Šæ—¥è¨‚å–®    â”‚ â”‚  å¾…è™•ç†è¨‚å–®  â”‚ â”‚  ä½åº«å­˜å•†å“  â”‚    â”‚
â”‚  â”‚  NT$ 15,800 â”‚ â”‚    12 ç­†    â”‚ â”‚    3 ç­†     â”‚ â”‚    2 é …     â”‚    â”‚
â”‚  â”‚  â†‘ 12.5%   â”‚ â”‚  â†‘ 8.2%    â”‚ â”‚             â”‚ â”‚             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      æœ¬é€±ç‡Ÿæ”¶è¶¨å‹¢åœ–              â”‚ â”‚     ç†±éŠ·å•†å“ Top 5          â”‚ â”‚
â”‚  â”‚  â–²                              â”‚ â”‚                             â”‚ â”‚
â”‚  â”‚  â”‚    â•±â•²      â•±â•²               â”‚ â”‚  1. è€¶åŠ é›ªè²     â–ˆâ–ˆâ–ˆâ–ˆ 32   â”‚ â”‚
â”‚  â”‚  â”‚   â•±  â•²    â•±  â•²              â”‚ â”‚  2. æ›¼ç‰¹å¯§       â–ˆâ–ˆâ–ˆ 28    â”‚ â”‚
â”‚  â”‚  â”‚  â•±    â•²  â•±    â•²             â”‚ â”‚  3. å·´è¥¿å±±å¤šå£«   â–ˆâ–ˆ 21     â”‚ â”‚
â”‚  â”‚  â”‚ â•±      â•²â•±      â•²            â”‚ â”‚  4. è‚¯äº AA     â–ˆâ–ˆ 18      â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º           â”‚ â”‚  5. å“¥å€«æ¯”äº    â–ˆ 15       â”‚ â”‚
â”‚  â”‚    ä¸€ äºŒ ä¸‰ å›› äº” å…­ æ—¥          â”‚ â”‚                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    å³æ™‚è¨‚å–®å‹•æ…‹                                   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  ğŸŸ¢ ORD-20260105-0012  å¼µä¸‰  NT$1,200  å·²ç¢ºèª  10:30            â”‚ â”‚
â”‚  â”‚  ğŸŸ¡ ORD-20260105-0011  æå››  NT$800   å¾…è™•ç†   10:25            â”‚ â”‚
â”‚  â”‚  ğŸŸ¢ ORD-20260105-0010  ç‹äº”  NT$1,500  æº–å‚™ä¸­  10:15            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 éŠ·å”®å ±è¡¨

#### 4.3.1 éŠ·å”®ç¸½è¦½å ±è¡¨

| æŒ‡æ¨™ | èªªæ˜ | è¨ˆç®—æ–¹å¼ |
|------|------|---------|
| ç¸½ç‡Ÿæ”¶ | æŒ‡å®šæœŸé–“å…§çš„ç¸½éŠ·å”®é‡‘é¡ | SUM(final_amount) |
| è¨‚å–®æ•¸ | æŒ‡å®šæœŸé–“å…§çš„è¨‚å–®ç¸½æ•¸ | COUNT(orders) |
| å¹³å‡å®¢å–®åƒ¹ | æ¯ç­†è¨‚å–®å¹³å‡é‡‘é¡ | ç¸½ç‡Ÿæ”¶ / è¨‚å–®æ•¸ |
| é€€è²¨ç‡ | å–æ¶ˆè¨‚å–®ä½”æ¯” | å–æ¶ˆè¨‚å–®æ•¸ / ç¸½è¨‚å–®æ•¸ |
| æ—¥å‡ç‡Ÿæ”¶ | æ¯æ—¥å¹³å‡ç‡Ÿæ”¶ | ç¸½ç‡Ÿæ”¶ / å¤©æ•¸ |

#### 4.3.2 éŠ·å”®è¶¨å‹¢åˆ†æ

```
ç¯©é¸æ¢ä»¶ï¼š
â”œâ”€â”€ æ™‚é–“ç¯„åœï¼šä»Šæ—¥/æœ¬é€±/æœ¬æœˆ/æœ¬å­£/æœ¬å¹´/è‡ªè¨‚
â”œâ”€â”€ æ™‚é–“ç²’åº¦ï¼šå°æ™‚/æ—¥/é€±/æœˆ
â”œâ”€â”€ æ¯”è¼ƒæ¨¡å¼ï¼šåŒæœŸæ¯”è¼ƒï¼ˆå»å¹´åŒæœŸ/ä¸ŠæœˆåŒæœŸï¼‰
â””â”€â”€ é¡¯ç¤ºé¡å‹ï¼šæŠ˜ç·šåœ–/æŸ±ç‹€åœ–/é¢ç©åœ–
```

#### 4.3.3 è¨‚å–®ç‹€æ…‹åˆ†æ

| ç‹€æ…‹ | é¡è‰²æ¨™ç¤º | åˆ†ææŒ‡æ¨™ |
|------|---------|---------|
| å¾…è™•ç† | ğŸŸ¡ é»ƒè‰² | æ•¸é‡ã€å¹³å‡ç­‰å¾…æ™‚é–“ |
| å·²ç¢ºèª | ğŸ”µ è—è‰² | æ•¸é‡ã€ç¢ºèªé€Ÿåº¦ |
| æº–å‚™ä¸­ | ğŸŸ  æ©˜è‰² | æ•¸é‡ã€è£½ä½œæ™‚é–“ |
| å¯å–è²¨ | ğŸŸ¢ ç¶ è‰² | æ•¸é‡ã€ç­‰å¾…å–è²¨æ™‚é–“ |
| å·²å®Œæˆ | âœ… ç°è‰² | æ•¸é‡ã€å®Œæˆç‡ |
| å·²å–æ¶ˆ | âŒ ç´…è‰² | æ•¸é‡ã€å–æ¶ˆåŸå› åˆ†æ |

#### 4.3.4 ä»˜æ¬¾æ–¹å¼åˆ†æ

```
ä»˜æ¬¾æ–¹å¼ä½”æ¯”åœ“é¤…åœ–ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                â”‚
â”‚        â•±â”€â”€â”€â•²                  â”‚
â”‚      â•±  ğŸ’µ  â•²   ç¾é‡‘ 35%      â”‚
â”‚     â”‚  ç¾é‡‘  â”‚                 â”‚
â”‚     â”‚       â”‚   è½‰å¸³ 25%      â”‚
â”‚      â•² ğŸ¦  â•±                  â”‚
â”‚        â•²â”€â•±                    â”‚
â”‚                                â”‚
â”‚  ğŸ’³ ä¿¡ç”¨å¡ 20%                 â”‚
â”‚  ğŸ“± LINE Pay 20%              â”‚
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 å®¢æˆ¶å ±è¡¨

#### 4.4.1 å®¢æˆ¶ç¸½è¦½

| æŒ‡æ¨™ | èªªæ˜ |
|------|------|
| ç¸½å®¢æˆ¶æ•¸ | ç³»çµ±ä¸­çš„ç¸½å®¢æˆ¶æ•¸é‡ |
| æ´»èºå®¢æˆ¶ | éå» 30/60/90 å¤©æœ‰æ¶ˆè²»çš„å®¢æˆ¶ |
| æ–°å®¢æˆ¶ | æŒ‡å®šæœŸé–“æ–°è¨»å†Šçš„å®¢æˆ¶ |
| å›è³¼ç‡ | æœ‰ç¬¬äºŒæ¬¡æ¶ˆè²»çš„å®¢æˆ¶æ¯”ä¾‹ |
| å¹³å‡æ¶ˆè²»é »ç‡ | å®¢æˆ¶å¹³å‡æ¶ˆè²»é–“éš” |

#### 4.4.2 RFM å®¢æˆ¶åˆ†ç¾¤

RFM æ¨¡å‹æ˜¯ CRM ç³»çµ±ä¸­æœ€é‡è¦çš„å®¢æˆ¶åˆ†æå·¥å…·ï¼š

| æŒ‡æ¨™ | è‹±æ–‡ | èªªæ˜ | è¨ˆç®—æ–¹å¼ |
|------|------|------|---------|
| R | Recency | æœ€è¿‘æ¶ˆè²» | æœ€å¾Œè¨‚å–®æ—¥æœŸè·ä»Šå¤©æ•¸ |
| F | Frequency | æ¶ˆè²»é »ç‡ | ç¸½è¨‚å–®æ•¸ |
| M | Monetary | æ¶ˆè²»é‡‘é¡ | ç¸½æ¶ˆè²»é‡‘é¡ |

**å®¢æˆ¶åˆ†ç¾¤å®šç¾©**ï¼š

| åˆ†ç¾¤åç¨± | RFM çµ„åˆ | è¡ŒéŠ·å»ºè­° |
|---------|---------|---------|
| ğŸŒŸ é‘½çŸ³å®¢æˆ¶ | Râ†‘ Fâ†‘ Mâ†‘ | VIP å°ˆå±¬å„ªæƒ ã€å„ªå…ˆæœå‹™ |
| ğŸ’ å¿ å¯¦å®¢æˆ¶ | Râ†‘ Fâ†‘ Mâ†“ | æå‡å®¢å–®åƒ¹ã€æ¨è–¦é«˜åƒ¹å•†å“ |
| ğŸ”¥ æ½›åŠ›å®¢æˆ¶ | Râ†‘ Fâ†“ Mâ†‘ | å¢åŠ äº’å‹•ã€æé«˜æ¶ˆè²»é »ç‡ |
| ğŸ†• æ–°å®¢æˆ¶ | Râ†‘ Fâ†“ Mâ†“ | æ–°å®¢å„ªæƒ ã€å»ºç«‹ä¿¡ä»» |
| ğŸ˜´ æ²‰ç¡å®¢æˆ¶ | Râ†“ Fâ†‘ Mâ†‘ | å–šé†’æ´»å‹•ã€é™æ™‚å„ªæƒ  |
| âš ï¸ æµå¤±é¢¨éšª | Râ†“ Fâ†“ Mâ†‘ | æŒ½å›æ–¹æ¡ˆã€å•å·èª¿æŸ¥ |
| ğŸ’¤ å·²æµå¤± | Râ†“ Fâ†“ Mâ†“ | å¤§å‹ä¿ƒéŠ·ã€é‡æ–°ç²å®¢ |

#### 4.4.3 å®¢æˆ¶ç”Ÿå‘½é€±æœŸåƒ¹å€¼ (CLV)

```
CLV = å¹³å‡å®¢å–®åƒ¹ Ã— å¹³å‡æ¶ˆè²»é »ç‡(å¹´) Ã— å¹³å‡å®¢æˆ¶å£½å‘½(å¹´)
```

#### 4.4.4 å®¢æˆ¶æˆé•·è¶¨å‹¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å®¢æˆ¶æˆé•·è¶¨å‹¢åœ–                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  200 â”¤                                           â•±â”€â”€â”€â”€â”€â”€      â”‚
â”‚      â”‚                                     â•±â”€â”€â”€â”€â•±             â”‚
â”‚  150 â”¤                               â•±â”€â”€â”€â”€â•±                   â”‚
â”‚      â”‚                         â•±â”€â”€â”€â”€â•±                         â”‚
â”‚  100 â”¤                   â•±â”€â”€â”€â”€â•±                               â”‚
â”‚      â”‚             â•±â”€â”€â”€â”€â•±                                     â”‚
â”‚   50 â”¤       â•±â”€â”€â”€â”€â•±                                           â”‚
â”‚      â”‚ â•±â”€â”€â”€â”€â•±                                                 â”‚
â”‚    0 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚
â”‚        1æœˆ  2æœˆ  3æœˆ  4æœˆ  5æœˆ  6æœˆ  7æœˆ  8æœˆ  9æœˆ  10æœˆ       â”‚
â”‚                                                                â”‚
â”‚   â–¬â–¬â–¬ ç´¯è¨ˆå®¢æˆ¶æ•¸    â”€ â”€ â”€ æ–°å¢å®¢æˆ¶æ•¸                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.5 å•†å“å ±è¡¨

#### 4.5.1 å•†å“éŠ·å”®æ’è¡Œ

| æ’å | å•†å“åç¨± | éŠ·å”®æ•¸é‡ | éŠ·å”®é‡‘é¡ | æ¯›åˆ©ç‡ |
|:----:|---------|--------:|--------:|------:|
| 1 | è€¶åŠ é›ªè² | 128 | NT$ 64,000 | 45% |
| 2 | æ›¼ç‰¹å¯§ | 96 | NT$ 43,200 | 42% |
| 3 | å·´è¥¿å±±å¤šå£« | 85 | NT$ 34,000 | 48% |
| ... | ... | ... | ... | ... |

#### 4.5.2 åˆ†é¡éŠ·å”®åˆ†æ

| åˆ†é¡ | éŠ·å”®é‡‘é¡ | ä½”æ¯” | è¼ƒä¸ŠæœŸ |
|------|--------:|-----:|-------:|
| å–®å“å’–å•¡ | NT$ 180,000 | 60% | â†‘ 15% |
| é…æ–¹è±† | NT$ 90,000 | 30% | â†‘ 8% |
| ç‰¹é¸ç³»åˆ— | NT$ 30,000 | 10% | â†“ 3% |

#### 4.5.3 åº«å­˜åˆ†æå ±è¡¨

| å ±è¡¨é¡å‹ | èªªæ˜ |
|---------|------|
| åº«å­˜é€±è½‰ç‡ | åº«å­˜å‘¨è½‰é€Ÿåº¦åˆ†æ |
| åº«å­˜å¤©æ•¸ | å¹³å‡åº«å­˜å¯éŠ·å”®å¤©æ•¸ |
| æ»¯éŠ·å•†å“ | è¶…é N å¤©æœªéŠ·å”®çš„å•†å“ |
| åº«å­˜åƒ¹å€¼ | åº«å­˜ç¸½åƒ¹å€¼åˆ†æ |

#### 4.5.4 å•†å“æ¯›åˆ©åˆ†æ

```
æ¯›åˆ©ç‡ = (å”®åƒ¹ - æˆæœ¬åƒ¹) / å”®åƒ¹ Ã— 100%
```

### 4.6 ç‡Ÿé‹å ±è¡¨

#### 4.6.1 è¨‚å–®è™•ç†æ•ˆç‡

| æŒ‡æ¨™ | èªªæ˜ | ç›®æ¨™å€¼ |
|------|------|--------|
| å¹³å‡ç¢ºèªæ™‚é–“ | è¨‚å–®å»ºç«‹åˆ°ç¢ºèªçš„å¹³å‡æ™‚é–“ | < 10 åˆ†é˜ |
| å¹³å‡è£½ä½œæ™‚é–“ | ç¢ºèªåˆ°æº–å‚™å®Œæˆçš„å¹³å‡æ™‚é–“ | < 30 åˆ†é˜ |
| å¹³å‡å®Œæˆæ™‚é–“ | è¨‚å–®å»ºç«‹åˆ°å®Œæˆçš„å¹³å‡æ™‚é–“ | < 2 å°æ™‚ |
| æº–æ™‚å®Œæˆç‡ | åœ¨é æœŸæ™‚é–“å…§å®Œæˆçš„æ¯”ä¾‹ | > 95% |

#### 4.6.2 å–è²¨æ–¹å¼åˆ†æ

| å–è²¨æ–¹å¼ | è¨‚å–®æ•¸ | é‡‘é¡ | å¹³å‡å®¢å–®åƒ¹ |
|---------|------:|-----:|----------:|
| è‡ªå– | 156 | NT$ 78,000 | NT$ 500 |
| å®…é… | 44 | NT$ 35,200 | NT$ 800 |

#### 4.6.3 æ™‚æ®µåˆ†æ

```
è¨‚å–®æ™‚æ®µåˆ†å¸ƒï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                            â”‚
â”‚ 08-10 â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                12%    â”‚
â”‚ 10-12 â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    24%    â”‚
â”‚ 12-14 â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ            16%    â”‚
â”‚ 14-16 â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        20%    â”‚
â”‚ 16-18 â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ            16%    â”‚
â”‚ 18-20 â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                     8%    â”‚
â”‚ 20-22 â”‚â–ˆâ–ˆâ–ˆâ–ˆ                         4%    â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.7 å ±è¡¨åŠŸèƒ½åˆ—è¡¨

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| æ™‚é–“ç¯„åœé¸æ“‡ | é è¨­ç¯„åœï¼ˆä»Šæ—¥/æœ¬é€±/æœ¬æœˆï¼‰+ è‡ªè¨‚æ—¥æœŸ |
| å³æ™‚æ›´æ–° | æ¯ 5 åˆ†é˜è‡ªå‹•æ›´æ–°ï¼ˆå¯æ‰‹å‹•åˆ·æ–°ï¼‰ |
| åœ–è¡¨åˆ‡æ› | æ”¯æ´å¤šç¨®åœ–è¡¨é¡å‹åˆ‡æ› |
| è³‡æ–™ä¸‹è¼‰ | åŒ¯å‡º Excel/CSV/PDF |
| æ’ç¨‹å ±è¡¨ | è¨­å®šå®šæœŸç™¼é€å ±è¡¨åˆ° Email |
| æ”¶è—å ±è¡¨ | å°‡å¸¸ç”¨å ±è¡¨åŠ å…¥æ”¶è— |
| è‡ªè¨‚å„€è¡¨æ¿ | æ‹–æ‹‰æ’åˆ—å„€è¡¨æ¿å…ƒä»¶ |

---

## äº”ã€è³‡æ–™åº«è¨­è¨ˆ

### 5.1 æ–°å¢è³‡æ–™è¡¨

```sql
-- =====================================================
-- 007_create_admin_tables.sql
-- å¾Œå°ç®¡ç†ç³»çµ±ç›¸é—œè³‡æ–™è¡¨
-- =====================================================

-- 1. è§’è‰²è¡¨
CREATE TABLE roles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(50) NOT NULL UNIQUE,
  display_name VARCHAR(100) NOT NULL,
  description TEXT,
  is_system BOOLEAN NOT NULL DEFAULT false,  -- ç³»çµ±è§’è‰²ä¸å¯åˆªé™¤
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- 2. æ¬Šé™è¡¨
CREATE TABLE permissions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  code VARCHAR(100) NOT NULL UNIQUE,
  name VARCHAR(100) NOT NULL,
  description TEXT,
  module VARCHAR(50) NOT NULL,  -- æ¨¡çµ„åˆ†é¡
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- 3. è§’è‰²æ¬Šé™é—œè¯è¡¨
CREATE TABLE role_permissions (
  role_id UUID NOT NULL REFERENCES roles(id) ON DELETE CASCADE,
  permission_id UUID NOT NULL REFERENCES permissions(id) ON DELETE CASCADE,
  PRIMARY KEY (role_id, permission_id)
);

-- 4. å¾Œå°ç”¨æˆ¶è¡¨
CREATE TABLE admin_users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) NOT NULL UNIQUE,
  password_hash TEXT NOT NULL,
  name VARCHAR(255) NOT NULL,
  avatar_url TEXT,
  role_id UUID NOT NULL REFERENCES roles(id),
  is_active BOOLEAN NOT NULL DEFAULT true,
  last_login_at TIMESTAMPTZ,
  login_count INTEGER NOT NULL DEFAULT 0,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- 5. æ“ä½œæ—¥èªŒè¡¨
CREATE TABLE admin_activity_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  admin_user_id UUID NOT NULL REFERENCES admin_users(id),
  action VARCHAR(100) NOT NULL,
  module VARCHAR(50) NOT NULL,
  target_type VARCHAR(50),  -- æ“ä½œå°è±¡é¡å‹ (order, product, customer...)
  target_id UUID,           -- æ“ä½œå°è±¡ ID
  details JSONB,            -- æ“ä½œè©³æƒ…
  ip_address INET,
  user_agent TEXT,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- 6. å•†å“åˆ†é¡è¡¨
CREATE TABLE product_categories (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(100) NOT NULL,
  slug VARCHAR(100) NOT NULL UNIQUE,
  description TEXT,
  parent_id UUID REFERENCES product_categories(id) ON DELETE SET NULL,
  image_url TEXT,
  sort_order INTEGER NOT NULL DEFAULT 0,
  is_active BOOLEAN NOT NULL DEFAULT true,
  product_count INTEGER NOT NULL DEFAULT 0,  -- è©²åˆ†é¡å•†å“æ•¸ï¼ˆç”± Trigger æ›´æ–°ï¼‰
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- 7. åº«å­˜èª¿æ•´è¨˜éŒ„è¡¨
CREATE TABLE inventory_adjustments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  product_id UUID NOT NULL REFERENCES products(id),
  admin_user_id UUID NOT NULL REFERENCES admin_users(id),
  adjustment_type VARCHAR(20) NOT NULL,  -- increase, decrease, set
  quantity_before INTEGER NOT NULL,
  quantity_change INTEGER NOT NULL,
  quantity_after INTEGER NOT NULL,
  reason TEXT,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_admin_users_email ON admin_users(email);
CREATE INDEX idx_admin_users_role_id ON admin_users(role_id);
CREATE INDEX idx_admin_activity_logs_admin_user_id ON admin_activity_logs(admin_user_id);
CREATE INDEX idx_admin_activity_logs_created_at ON admin_activity_logs(created_at DESC);
CREATE INDEX idx_admin_activity_logs_module ON admin_activity_logs(module);
CREATE INDEX idx_product_categories_parent_id ON product_categories(parent_id);
CREATE INDEX idx_product_categories_slug ON product_categories(slug);
CREATE INDEX idx_inventory_adjustments_product_id ON inventory_adjustments(product_id);
```

### 5.2 æ“´å±•ç¾æœ‰è¡¨

```sql
-- =====================================================
-- 008_extend_products_table.sql
-- æ“´å±•å•†å“è¡¨æ¬„ä½
-- =====================================================

-- æ–°å¢å•†å“æ¬„ä½
ALTER TABLE products 
ADD COLUMN IF NOT EXISTS sku VARCHAR(50),
ADD COLUMN IF NOT EXISTS short_description VARCHAR(500),
ADD COLUMN IF NOT EXISTS category_id UUID REFERENCES product_categories(id) ON DELETE SET NULL,
ADD COLUMN IF NOT EXISTS cost_price DECIMAL(10, 2),
ADD COLUMN IF NOT EXISTS compare_price DECIMAL(10, 2),
ADD COLUMN IF NOT EXISTS low_stock_threshold INTEGER DEFAULT 10,
ADD COLUMN IF NOT EXISTS weight DECIMAL(8, 2),
ADD COLUMN IF NOT EXISTS origin VARCHAR(100),
ADD COLUMN IF NOT EXISTS roast_level VARCHAR(20),
ADD COLUMN IF NOT EXISTS flavor_notes TEXT[],
ADD COLUMN IF NOT EXISTS images JSONB DEFAULT '[]',
ADD COLUMN IF NOT EXISTS is_featured BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN IF NOT EXISTS sort_order INTEGER DEFAULT 0,
ADD COLUMN IF NOT EXISTS meta_title VARCHAR(60),
ADD COLUMN IF NOT EXISTS meta_description VARCHAR(160),
ADD COLUMN IF NOT EXISTS created_by UUID REFERENCES admin_users(id),
ADD COLUMN IF NOT EXISTS updated_by UUID REFERENCES admin_users(id);

-- æ–°å¢ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_products_category_id ON products(category_id);
CREATE INDEX IF NOT EXISTS idx_products_sku ON products(sku);
CREATE INDEX IF NOT EXISTS idx_products_is_featured ON products(is_featured);
CREATE UNIQUE INDEX IF NOT EXISTS idx_products_sku_unique ON products(sku) WHERE sku IS NOT NULL;
```

### 5.3 ER Diagram

```mermaid
erDiagram
    admin_users ||--o{ admin_activity_logs : "has"
    admin_users }o--|| roles : "belongs to"
    roles ||--o{ role_permissions : "has"
    permissions ||--o{ role_permissions : "assigned to"
    product_categories ||--o{ products : "contains"
    product_categories ||--o{ product_categories : "parent of"
    products ||--o{ inventory_adjustments : "has"
    admin_users ||--o{ inventory_adjustments : "creates"
    
    admin_users {
        uuid id PK
        varchar email UK
        text password_hash
        varchar name
        uuid role_id FK
        boolean is_active
        timestamptz last_login_at
    }
    
    roles {
        uuid id PK
        varchar name UK
        varchar display_name
        boolean is_system
    }
    
    permissions {
        uuid id PK
        varchar code UK
        varchar name
        varchar module
    }
    
    role_permissions {
        uuid role_id PK,FK
        uuid permission_id PK,FK
    }
    
    admin_activity_logs {
        uuid id PK
        uuid admin_user_id FK
        varchar action
        varchar module
        jsonb details
    }
    
    product_categories {
        uuid id PK
        varchar name
        varchar slug UK
        uuid parent_id FK
        integer sort_order
    }
    
    inventory_adjustments {
        uuid id PK
        uuid product_id FK
        uuid admin_user_id FK
        integer quantity_change
        text reason
    }
```

---

## å…­ã€API è¨­è¨ˆ

### 6.1 èªè­‰ API

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | æ¬Šé™ |
|------|------|------|------|
| POST | `/api/admin/auth/login` | å¾Œå°ç™»å…¥ | å…¬é–‹ |
| POST | `/api/admin/auth/logout` | ç™»å‡º | å·²ç™»å…¥ |
| GET | `/api/admin/auth/me` | å–å¾—ç•¶å‰ç”¨æˆ¶è³‡è¨Š | å·²ç™»å…¥ |
| POST | `/api/admin/auth/refresh` | åˆ·æ–° Token | å·²ç™»å…¥ |
| POST | `/api/admin/auth/forgot-password` | å¿˜è¨˜å¯†ç¢¼ | å…¬é–‹ |
| POST | `/api/admin/auth/reset-password` | é‡è¨­å¯†ç¢¼ | å…¬é–‹ |

### 6.2 å¸³è™Ÿç®¡ç† API

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | æ¬Šé™ |
|------|------|------|------|
| GET | `/api/admin/users` | å–å¾—å¸³è™Ÿåˆ—è¡¨ | `admin:read` |
| POST | `/api/admin/users` | å»ºç«‹å¸³è™Ÿ | `admin:create` |
| GET | `/api/admin/users/:id` | å–å¾—å¸³è™Ÿè©³æƒ… | `admin:read` |
| PATCH | `/api/admin/users/:id` | æ›´æ–°å¸³è™Ÿ | `admin:update` |
| DELETE | `/api/admin/users/:id` | åˆªé™¤/åœç”¨å¸³è™Ÿ | `admin:delete` |
| POST | `/api/admin/users/:id/reset-password` | é‡è¨­å¯†ç¢¼ | `admin:update` |

### 6.3 è§’è‰²æ¬Šé™ API

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | æ¬Šé™ |
|------|------|------|------|
| GET | `/api/admin/roles` | å–å¾—è§’è‰²åˆ—è¡¨ | `admin:read` |
| POST | `/api/admin/roles` | å»ºç«‹è§’è‰² | Super Admin |
| PATCH | `/api/admin/roles/:id` | æ›´æ–°è§’è‰²æ¬Šé™ | Super Admin |
| DELETE | `/api/admin/roles/:id` | åˆªé™¤è§’è‰² | Super Admin |
| GET | `/api/admin/permissions` | å–å¾—æ¬Šé™åˆ—è¡¨ | `admin:read` |

### 6.4 å•†å“ç®¡ç† API

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | æ¬Šé™ |
|------|------|------|------|
| GET | `/api/admin/products` | å–å¾—å•†å“åˆ—è¡¨ | `products:read` |
| POST | `/api/admin/products` | æ–°å¢å•†å“ | `products:create` |
| GET | `/api/admin/products/:id` | å–å¾—å•†å“è©³æƒ… | `products:read` |
| PATCH | `/api/admin/products/:id` | æ›´æ–°å•†å“ | `products:update` |
| DELETE | `/api/admin/products/:id` | åˆªé™¤å•†å“ | `products:delete` |
| PATCH | `/api/admin/products/:id/toggle` | ä¸Šä¸‹æ¶å•†å“ | `products:toggle` |
| POST | `/api/admin/products/bulk` | æ‰¹æ¬¡æ“ä½œ | `products:update` |
| POST | `/api/admin/upload` | ä¸Šå‚³åœ–ç‰‡ | `products:create` |

### 6.5 åˆ†é¡ç®¡ç† API

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | æ¬Šé™ |
|------|------|------|------|
| GET | `/api/admin/categories` | å–å¾—åˆ†é¡åˆ—è¡¨ | `products:read` |
| POST | `/api/admin/categories` | æ–°å¢åˆ†é¡ | `categories:manage` |
| PATCH | `/api/admin/categories/:id` | æ›´æ–°åˆ†é¡ | `categories:manage` |
| DELETE | `/api/admin/categories/:id` | åˆªé™¤åˆ†é¡ | `categories:manage` |
| POST | `/api/admin/categories/reorder` | é‡æ–°æ’åº | `categories:manage` |

### 6.6 å ±è¡¨ API

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | æ¬Šé™ |
|------|------|------|------|
| GET | `/api/admin/reports/dashboard` | å„€è¡¨æ¿æ•¸æ“š | `reports:sales_overview` |
| GET | `/api/admin/reports/sales` | éŠ·å”®å ±è¡¨ | `reports:sales_detail` |
| GET | `/api/admin/reports/customers` | å®¢æˆ¶å ±è¡¨ | `reports:customer_analysis` |
| GET | `/api/admin/reports/products` | å•†å“å ±è¡¨ | `reports:product_analysis` |
| GET | `/api/admin/reports/operations` | ç‡Ÿé‹å ±è¡¨ | `reports:operations` |
| GET | `/api/admin/reports/rfm` | RFM åˆ†æ | `reports:customer_analysis` |
| POST | `/api/admin/reports/export` | åŒ¯å‡ºå ±è¡¨ | `reports:export` |

### 6.7 æ“ä½œæ—¥èªŒ API

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | æ¬Šé™ |
|------|------|------|------|
| GET | `/api/admin/logs` | å–å¾—æ“ä½œæ—¥èªŒ | `logs:read` |
| GET | `/api/admin/logs/user/:userId` | å–å¾—ç”¨æˆ¶æ“ä½œæ—¥èªŒ | `logs:read` |

---

## ä¸ƒã€å¯¦ä½œå„ªå…ˆé †åº

### Phase 1ï¼šåŸºç¤è¨­æ–½ï¼ˆé ä¼° 3-5 å¤©ï¼‰

| å„ªå…ˆç´š | ä»»å‹™ | èªªæ˜ |
|:-----:|------|------|
| P0 | å»ºç«‹è³‡æ–™åº«é·ç§» | åŸ·è¡Œ 007, 008 é·ç§»æª”æ¡ˆ |
| P0 | å»ºç«‹é è¨­è§’è‰²å’Œæ¬Šé™ | Super Admin, Manager, Staff |
| P0 | å¾Œå°èªè­‰ API | ç™»å…¥ã€ç™»å‡ºã€Session ç®¡ç† |
| P0 | æ¬Šé™é©—è­‰ Middleware | RBAC æ¬Šé™æª¢æŸ¥ |

### Phase 2ï¼šå¸³è™Ÿç®¡ç†ï¼ˆé ä¼° 2-3 å¤©ï¼‰

| å„ªå…ˆç´š | ä»»å‹™ | èªªæ˜ |
|:-----:|------|------|
| P1 | å¸³è™Ÿ CRUD API | å»ºç«‹ã€ç·¨è¼¯ã€åœç”¨å¸³è™Ÿ |
| P1 | å¸³è™Ÿç®¡ç†ä»‹é¢ | åˆ—è¡¨ã€è¡¨å–®ã€æ¬Šé™æŒ‡æ´¾ |
| P1 | æ“ä½œæ—¥èªŒè¨˜éŒ„ | è‡ªå‹•è¨˜éŒ„é—œéµæ“ä½œ |

### Phase 3ï¼šå•†å“ç®¡ç†ï¼ˆé ä¼° 3-4 å¤©ï¼‰

| å„ªå…ˆç´š | ä»»å‹™ | èªªæ˜ |
|:-----:|------|------|
| P1 | å•†å“ CRUD å®Œå–„ | å®Œæ•´çš„å•†å“ç·¨è¼¯åŠŸèƒ½ |
| P1 | åœ–ç‰‡ä¸Šå‚³ | Supabase Storage æ•´åˆ |
| P2 | åˆ†é¡ç®¡ç† | å•†å“åˆ†é¡ CRUD |
| P2 | åº«å­˜ç®¡ç† | åº«å­˜èª¿æ•´ã€è¨˜éŒ„ã€é è­¦ |

### Phase 4ï¼šå ±è¡¨åŠŸèƒ½ï¼ˆé ä¼° 4-5 å¤©ï¼‰

| å„ªå…ˆç´š | ä»»å‹™ | èªªæ˜ |
|:-----:|------|------|
| P1 | å„€è¡¨æ¿ | å³æ™‚ç‡Ÿé‹æ•¸æ“š |
| P1 | éŠ·å”®å ±è¡¨ | éŠ·å”®ç¸½è¦½ã€è¶¨å‹¢åˆ†æ |
| P2 | å®¢æˆ¶å ±è¡¨ | å®¢æˆ¶åˆ†æã€RFM åˆ†ç¾¤ |
| P2 | å•†å“å ±è¡¨ | éŠ·å”®æ’è¡Œã€åº«å­˜åˆ†æ |
| P3 | å ±è¡¨åŒ¯å‡º | Excel/PDF åŒ¯å‡ºåŠŸèƒ½ |

### Phase 5ï¼šé€²éšåŠŸèƒ½ï¼ˆé ä¼° 2-3 å¤©ï¼‰

| å„ªå…ˆç´š | ä»»å‹™ | èªªæ˜ |
|:-----:|------|------|
| P3 | è‡ªè¨‚å„€è¡¨æ¿ | æ‹–æ‹‰æ’åˆ—å…ƒä»¶ |
| P3 | æ’ç¨‹å ±è¡¨ | å®šæœŸç™¼é€ Email |
| P3 | æ‰¹æ¬¡æ“ä½œ | æ‰¹æ¬¡ä¸Šä¸‹æ¶ã€åŒ¯å…¥ |

---

## é™„éŒ„

### A. é è¨­æ¬Šé™æ¸…å–®

```sql
-- åˆå§‹åŒ–æ¬Šé™è³‡æ–™
INSERT INTO permissions (code, name, module) VALUES
-- å¸³è™Ÿç®¡ç†
('admin:read', 'æŸ¥çœ‹å¸³è™Ÿ', 'admin'),
('admin:create', 'å»ºç«‹å¸³è™Ÿ', 'admin'),
('admin:update', 'ç·¨è¼¯å¸³è™Ÿ', 'admin'),
('admin:delete', 'åœç”¨å¸³è™Ÿ', 'admin'),
('admin:assign_role', 'æŒ‡æ´¾è§’è‰²', 'admin'),
-- è¨‚å–®ç®¡ç†
('orders:read', 'æŸ¥çœ‹è¨‚å–®åˆ—è¡¨', 'orders'),
('orders:read_detail', 'æŸ¥çœ‹è¨‚å–®è©³æƒ…', 'orders'),
('orders:update_status', 'æ›´æ–°è¨‚å–®ç‹€æ…‹', 'orders'),
('orders:cancel', 'å–æ¶ˆè¨‚å–®', 'orders'),
('orders:delete', 'åˆªé™¤è¨‚å–®', 'orders'),
('orders:export', 'åŒ¯å‡ºè¨‚å–®', 'orders'),
-- å•†å“ç®¡ç†
('products:read', 'æŸ¥çœ‹å•†å“', 'products'),
('products:create', 'æ–°å¢å•†å“', 'products'),
('products:update', 'ç·¨è¼¯å•†å“', 'products'),
('products:toggle', 'ä¸Šä¸‹æ¶å•†å“', 'products'),
('products:delete', 'åˆªé™¤å•†å“', 'products'),
('categories:manage', 'ç®¡ç†åˆ†é¡', 'products'),
-- å®¢æˆ¶ç®¡ç†
('customers:read', 'æŸ¥çœ‹å®¢æˆ¶åˆ—è¡¨', 'customers'),
('customers:read_detail', 'æŸ¥çœ‹å®¢æˆ¶è©³æƒ…', 'customers'),
('customers:update', 'ç·¨è¼¯å®¢æˆ¶', 'customers'),
('customers:delete', 'åˆªé™¤å®¢æˆ¶', 'customers'),
('customers:export', 'åŒ¯å‡ºå®¢æˆ¶', 'customers'),
-- å ±è¡¨
('reports:sales_overview', 'éŠ·å”®ç¸½è¦½', 'reports'),
('reports:sales_detail', 'è©³ç´°éŠ·å”®å ±è¡¨', 'reports'),
('reports:customer_analysis', 'å®¢æˆ¶åˆ†æ', 'reports'),
('reports:product_analysis', 'å•†å“åˆ†æ', 'reports'),
('reports:operations', 'ç‡Ÿé‹å ±è¡¨', 'reports'),
('reports:financial', 'è²¡å‹™å ±è¡¨', 'reports'),
('reports:export', 'åŒ¯å‡ºå ±è¡¨', 'reports'),
-- ç³»çµ±
('settings:basic', 'åŸºæœ¬è¨­å®š', 'settings'),
('settings:advanced', 'é€²éšè¨­å®š', 'settings'),
('logs:read', 'æŸ¥çœ‹æ“ä½œæ—¥èªŒ', 'system');
```

### B. å ±è¡¨ SQL ç¯„ä¾‹

```sql
-- éŠ·å”®ç¸½è¦½
SELECT 
  DATE(created_at) as date,
  COUNT(*) as order_count,
  SUM(final_amount) as total_revenue,
  AVG(final_amount) as avg_order_value
FROM orders
WHERE status != 'cancelled'
  AND created_at BETWEEN :start_date AND :end_date
GROUP BY DATE(created_at)
ORDER BY date DESC;

-- RFM åˆ†æ
WITH customer_rfm AS (
  SELECT 
    c.id,
    c.name,
    c.email,
    EXTRACT(DAY FROM NOW() - MAX(o.created_at)) as recency,
    COUNT(o.id) as frequency,
    COALESCE(SUM(o.final_amount), 0) as monetary
  FROM customers c
  LEFT JOIN orders o ON c.id = o.customer_id AND o.status != 'cancelled'
  GROUP BY c.id, c.name, c.email
)
SELECT 
  *,
  NTILE(5) OVER (ORDER BY recency DESC) as r_score,
  NTILE(5) OVER (ORDER BY frequency) as f_score,
  NTILE(5) OVER (ORDER BY monetary) as m_score
FROM customer_rfm;
```

---

## ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | èªªæ˜ |
|------|------|------|
| v1.0.0 | 2026-01-05 | åˆå§‹è¦åŠƒæ–‡ä»¶ |

---

## ç›¸é—œæ–‡ä»¶

- [README.md](../README.md) - å°ˆæ¡ˆèªªæ˜
- [DATABASE.md](../DATABASE.md) - è³‡æ–™åº«çµæ§‹
- [SETUP.md](../SETUP.md) - ç³»çµ±è¨­å®šæŒ‡å—

